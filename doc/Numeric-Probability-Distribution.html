<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Numeric.Probability.Distribution</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Numeric-Probability-Distribution.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) William Yager 2015</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>will (dot) yager (at) gmail (dot) com</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Numeric.Probability.Distribution</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">The distribution type</a></li><li><a href="#g:2">Probability operations</a></li><li><a href="#g:3">Building</a></li><li><a href="#g:4">Reducing</a></li><li><a href="#g:5">Combining</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides a data structure and associated functions for
 representing discrete probability distributions.</p><p>All time and space complexity metrics are given in terms of <code>n</code>. In this 
 case, <code>n</code> refers to the number of unique outcomes inserted into the tree.
 If one were to construct a tree by inserting a billion of the same
 outcome, <code>n</code> would still be 1.</p><p>The data structure is optimized for fast sampling from the distribution.
 Sampling ranges from <code>O(1)</code> to <code>O(log(n))</code> depending on the distribution.</p><p>Under the hood, the distribution is represented by a perfectly balanced
 binary tree. The tree enforces a heap property, where more likely outcomes
 are closer to the top than less likely outcomes. Because we're more 
 likely to sample from those outcomes, we minimize the amount of time
 spent traversing the tree.</p><p>When a duplicate outcome is inserted into the tree, the tree's &quot;dups&quot;
 counter is incremented. When more than half the tree is duplicate entries,
 the entire tree is rebuilt from scratch. Using amortized complexity 
 analysis, we can show that insertion is, at worst, <code>log(n)</code> amortized
 complexity. This prevents the size of tree from increasing to more than
 <code>O(n)</code>, even with many duplicate outcomes inserted.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Distribution">Distribution</a> p o</li><li class="src short"><a href="#v:sample">sample</a> :: (Ord p, Num p, Random p, MonadRandom m) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; m o</li><li class="src short"><a href="#v:cumulate">cumulate</a> :: Num p =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; p</li><li class="src short"><a href="#v:normalize">normalize</a> :: Fractional p =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</li><li class="src short"><a href="#v:empty">empty</a> :: Num p =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</li><li class="src short"><a href="#v:insert">insert</a> :: (Ord o, Num p, Ord p) =&gt; (o, p) -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</li><li class="src short"><a href="#v:fromList">fromList</a> :: (Ord o, Num p, Ord p) =&gt; [(o, p)] -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</li><li class="src short"><a href="#v:toList">toList</a> :: (Ord o, Num p) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; [(o, p)]</li><li class="src short"><a href="#v:foldrWithP">foldrWithP</a> ::  ((o, p) -&gt; b -&gt; b) -&gt; b -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; b</li><li class="src short"><a href="#v:joint">joint</a> :: (Ord o1, Ord o2, Num p, Ord p) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o1 -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o2 -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p (o1, o2)</li><li class="src short"><a href="#v:sum">sum</a> :: (Ord o, Num p, Ord p) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</li></ul></div><div id="interface"><h1 id="g:1">The distribution type</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Distribution" class="def">Distribution</a> p o</p><div class="doc"><p>A probability distribution with probabilities of type <code>p</code> and
 outcomes/events of type <code>o</code>.</p></div><div class="subs instances"><p id="control.i:Distribution" class="caption collapser" onclick="toggleSection('i:Distribution')">Instances</p><div id="section.i:Distribution" class="show"><table><tr><td class="src">(Show p, Show o) =&gt; Show (<a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">Probability operations</h1><div class="top"><p class="src"><a name="v:sample" class="def">sample</a> :: (Ord p, Num p, Random p, MonadRandom m) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; m o</p><div class="doc"><p>Take a sample from the distribution. Can be used with e.g. <code>evalRand</code>
 or <code>evalRandIO</code> from <code>Control.Monad.Random</code>. <code>O(log(n))</code> for a uniform 
 distribution (worst case), but approaches <code>O(1)</code> with less balanced
 distributions.</p></div></div><div class="top"><p class="src"><a name="v:cumulate" class="def">cumulate</a> :: Num p =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; p</p><div class="doc"><p>The sum of all probabilities in the distribution. <code>O(1)</code></p></div></div><div class="top"><p class="src"><a name="v:normalize" class="def">normalize</a> :: Fractional p =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</p><div class="doc"><p>Normalizes the distribution.
 After normalizing, <code><code><a href="Numeric-Probability-Distribution.html#v:cumulate">cumulate</a></code> distribution</code> is 1. <code>O(n)</code></p></div></div><h1 id="g:3">Building</h1><div class="top"><p class="src"><a name="v:empty" class="def">empty</a> :: Num p =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</p><div class="doc"><p>The empty distribution. <code>O(1)</code></p></div></div><div class="top"><p class="src"><a name="v:insert" class="def">insert</a> :: (Ord o, Num p, Ord p) =&gt; (o, p) -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</p><div class="doc"><p>Insert an outcome into the distribution.
 Inserting <code>(o,p1)</code> and <code>(o,p2)</code> results in the same sampled distribution as
 inserting <code>(o,p1+p2)</code>. <code>O(log(n))</code> amortized.</p></div></div><div class="top"><p class="src"><a name="v:fromList" class="def">fromList</a> :: (Ord o, Num p, Ord p) =&gt; [(o, p)] -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</p><div class="doc"><p><code>O(n*log(n))</code> amortized. </p></div></div><h1 id="g:4">Reducing</h1><div class="top"><p class="src"><a name="v:toList" class="def">toList</a> :: (Ord o, Num p) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; [(o, p)]</p><div class="doc"><p><code>O(n*log(n))</code>.</p></div></div><div class="top"><p class="src"><a name="v:foldrWithP" class="def">foldrWithP</a> ::  ((o, p) -&gt; b -&gt; b) -&gt; b -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; b</p><div class="doc"><p>A right-associative fold on the tree structure, including the
 probabilities. Note that outcomes may be repeated within the data structure.
 If you want identical outcomes to be lumped together, fold on the list 
 produced by <code><code><a href="Numeric-Probability-Distribution.html#v:toList">toList</a></code></code>. <code>O(n)</code>.</p></div></div><h1 id="g:5">Combining</h1><div class="top"><p class="src"><a name="v:joint" class="def">joint</a> :: (Ord o1, Ord o2, Num p, Ord p) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o1 -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o2 -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p (o1, o2)</p><div class="doc"><p>Creates a new distribution that's the joint distribution of the two provided.
 <code>O(nm*log(nm))</code> amortized.</p></div></div><div class="top"><p class="src"><a name="v:sum" class="def">sum</a> :: (Ord o, Num p, Ord p) =&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o -&gt; <a href="Numeric-Probability-Distribution.html#t:Distribution">Distribution</a> p o</p><div class="doc"><p>Creates a new distribution by summing the probabilities of the outcomes
 in the two provided. <code>O((n+m)log(n+m))</code> amortized.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>